---
import { t } from "i18next";

const swiperData = t("componenti.marquee", { returnObjects: true });

const products =
  swiperData && typeof swiperData === "object"
    ? Object.keys(swiperData).map((key) => {
        return {
          title: swiperData[key].title
        };
      })
    : [];
---

<div class="marquee-container w-full bg-bianco lg:py-[2.5vw] py-[18px] overflow-hidden whitespace-nowrap">
  <div class="marquee-content inline-flex gap-[6.944vw]">
    {products.map((item) => <h4 class="text-grigio-100">{item.title}</h4>)}
  </div>
</div>

<style>
  .marquee-content h4:last-child {
    margin-right: 6.944vw;
  }
</style>

<script>
  import gsap from "gsap";

  document.addEventListener("astro:page-load", () => {
    const marqueeContent = document.querySelector(".marquee-content");

    // Duplicate content for a seamless loop
    const marqueeClone = marqueeContent.cloneNode(true);
    marqueeContent.parentElement.appendChild(marqueeClone);

    gsap.to(".marquee-content", {
      xPercent: -100,
      ease: "none",
      duration: 20,
      repeat: -1
    });
  });
</script>
