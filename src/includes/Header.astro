---
/* Astro frontmatter */
---

<header class="z-50 absolute px-body h-[7.222vw] flex flex-row justify-between w-full items-center bg-bianco">
  <a href="/">
    <img src="/img/assets/logo-multi.svg" alt="" class="w-[11.111vw] h-[3.472vw]" />
  </a>
  <div class="flex flex-row gap-[1.944vw] items-center">
    <div class="bg-grigio-100 flex flex-row gap-[3.056vw] items-center" id="menu">
      <a href="/Azienda" class="menu-item"> Azienda </a>

      <!-- "Prodotti" menu with dropdown -->
      <div class="menu-item prodotti relative">
        <a href="" class="hover-trigger">
          <div class="flex flex-row gap-[0.556vw]">
            <span class="">Prodotti</span>
            <img src="/img/assets/plus.svg" alt="" class="w-[1.181vw]" id="plus" />
            <img src="/img/assets/minus.svg" alt="" class="w-[1.181vw] hidden" id="minus" />
          </div>
        </a>
        <div class="submenu hidden absolute bg-grigio-200">
          <div class="flex flex-col">
            <a href="/Oleodinamica" class="submenu-item block text-nero py-[0.5vw] btn-title"> Impianti di Oleodinamica ed Elettroidraulica </a>
            <a href="/Lubrificazione" class="submenu-item block text-nero py-[0.5vw] btn-title">Impianti di Lubrificazione a Olio e a Grasso</a>
            <a href="/Purificazione" class="submenu-item block text-nero py-[0.5vw] btn-title">Sistemi di Purificazione e Filtraggio</a>
            <a href="/Disaereazione" class="submenu-item block text-nero py-[0.5vw] btn-title">Unit√† di Disaerazione</a>
            <a href="/Cilindri" class="submenu-item block text-nero py-[0.5vw] btn-title">Cilindri Oleodinamici</a>
          </div>
        </div>
      </div>

      <!-- "Servizi" menu with dropdown -->
      <div class="menu-item servizi relative">
        <a href="" class="hover-trigger">
          <div class="flex flex-row gap-[0.556vw]">
            <span class="">Servizi</span>
            <img src="/img/assets/plus.svg" alt="" class="w-[1.181vw]" id="plus" />
            <img src="/img/assets/minus.svg" alt="" class="w-[1.181vw] hidden" id="minus" />
          </div>
        </a>
        <div class="submenu hidden absolute bg-grigio-200">
          <a href="Ricambi_e_Componentistica" class="submenu-item block text-nero py-[0.5vw]">Ricambi e Componentistica</a>
          <a href="#" class="submenu-item block text-nero py-[0.5vw]">Automazione Industriale</a>
          <a href="#" class="submenu-item block text-nero py-[0.5vw]">Pulizia e Filtraggio</a>
          <a href="#" class="submenu-item block text-nero py-[0.5vw]">Engineering</a>
          <a href="#" class="submenu-item block text-nero py-[0.5vw]">Manutenzione e Assistenza</a>
        </div>
      </div>

      <!-- Use an absolute path for the "Progetti" link -->
      <a href="/Progetti" class="menu-item"> Progetti </a>
      <a href="#" class="menu-item"> Area Riservata </a>
      <a href="/Contatti" class="menu-item contatti"> Contatti </a>
    </div>
  </div>

  <style>
    /* Define hidden class for controlling visibility */
    .hidden {
      display: none;
    }

    /* Basic styles for the submenu */
    .submenu {
      display: none;
      position: absolute;
      top: 4vw;
      left: 0;
      background-color: #e0e0e0;
      padding: 1.667vw;
      border-radius: 0.833vw;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      z-index: 10;
      width: fit-content;
    }

    .submenu.show {
      display: block;
    }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Selecting elements with null checks and logging for debugging
      const prodottiMenuItem = document.querySelector(".menu-item.prodotti .hover-trigger");
      const serviziMenuItem = document.querySelector(".menu-item.servizi .hover-trigger");
      const prodottiSubmenu = prodottiMenuItem?.nextElementSibling;
      const serviziSubmenu = serviziMenuItem?.nextElementSibling;

      // Function to close all submenus and reset styles
      function closeAllSubmenus() {
        const allSubmenus = document.querySelectorAll(".submenu");
        allSubmenus.forEach((submenu) => submenu.classList.remove("show"));

        // Reset icons and text colors for all menu items
        document.querySelectorAll(".menu-item").forEach((menuItem) => {
          const textElement = menuItem.querySelector(".hover-trigger > div");
          const plusIcon = menuItem.querySelector(".hover-trigger #plus");
          const minusIcon = menuItem.querySelector(".hover-trigger #minus");

          // Apply resets only if elements exist
          textElement?.classList.remove("text-blu");
          plusIcon?.classList.remove("hidden");
          minusIcon?.classList.add("hidden");
        });
      }

      // Toggle function for "Prodotti" submenu
      prodottiMenuItem?.addEventListener("click", function (event) {
        event.preventDefault();
        const isVisible = prodottiSubmenu?.classList.contains("show");
        closeAllSubmenus(); // Close other submenu

        if (!isVisible) {
          prodottiSubmenu?.classList.add("show");

          // Apply styles for "Prodotti" submenu
          const prodottiText = prodottiMenuItem.querySelector("div");
          const plusIcon = prodottiMenuItem.querySelector("#plus");
          const minusIcon = prodottiMenuItem.querySelector("#minus");

          // Apply styles if elements exist
          prodottiText?.classList.add("text-blu");
          plusIcon?.classList.add("hidden");
          minusIcon?.classList.remove("hidden");
        }
      });

      // Toggle function for "Servizi" submenu
      serviziMenuItem?.addEventListener("click", function (event) {
        event.preventDefault();
        const isVisible = serviziSubmenu?.classList.contains("show");
        closeAllSubmenus(); // Close other submenu

        if (!isVisible) {
          serviziSubmenu?.classList.add("show");

          // Apply styles for "Servizi" submenu
          const serviziText = serviziMenuItem.querySelector("div");
          const plusIcon = serviziMenuItem.querySelector("#plus");
          const minusIcon = serviziMenuItem.querySelector("#minus");

          // Apply styles if elements exist
          serviziText?.classList.add("text-blu");
          plusIcon?.classList.add("hidden");
          minusIcon?.classList.remove("hidden");
        }
      });

      // Close submenus when clicking outside
      document.addEventListener("click", function (event) {
        const target = event.target;
        if (!prodottiMenuItem?.contains(target) && !prodottiSubmenu?.contains(target) && !serviziMenuItem?.contains(target) && !serviziSubmenu?.contains(target)) {
          closeAllSubmenus();
        }
      });
    });
  </script>
</header>
